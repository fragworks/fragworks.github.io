<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Game Loop</title>
	
	
	<link rel="stylesheet" href="http://fragworks.io/css/style.css">
	<link rel="stylesheet" href="http://fragworks.io/fonts/docker-icon/fontcustom/fontcustom.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/monokai-sublime.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
	<script src="http://fragworks.io/js/fw.js"></script>
	
	<meta name="generator" content="Hugo 0.20" />
</head>
<body>
	<div class="container">
		<nav class="nav">
			<div class="nav-left">
				<a class="nav-item is-brand" href="http://fragworks.io/">
					<img src="http://fragworks.io/images/logo.svg" width="32" alt="FRAG: Framework for Rather Awesome Games">
					FRAG
				</a>
			</div>
			<div class="nav-center">
				<a class="nav-item" href="https://github.com/fragworks/frag">
					<span class="icon">
						<i class="fa fa-github"></i>
					</span>
				</a>
				<a class="nav-item" href="https://twitter.com/hahaitsfunny">
				<span class="icon">
					<i class="fa fa-twitter"></i>
				</span>
				</a>
			</div>
			<span id="nav-toggle" class="nav-toggle">
				<span></span>
				<span></span>
				<span></span>
			</span>
			<div id="nav-menu" class="nav-right nav-menu">
				<a class="nav-item" href="http://fragworks.io/">
					Home
				</a>
				
				
				
					<a class="nav-item" href="/community/index/">
						Community
					</a>
				
				
				
					<a class="nav-item" href="/documentation/index/">
						Documentation
					</a>
				
				
				
					<a class="nav-item" href="/roadmap/index/">
						Roadmap
					</a>
				
				
				<div class="nav-item">
					<div class="field is-grouped">
						<p class="control">
							<a id="twitter" class="button" data-social-network="Twitter" data-social-action="tweet" data-social-target="http://fragworks.io" target="_blank" href="https://twitter.com/intent/tweet?text=FRAG: a game development framework built with @nim_lang %23FRAG&amp;url=http://fragworks.io&amp;via=hahaitsfunny">
								<span class="icon">
								<i class="fa fa-twitter"></i>
								</span>
								<span>Tweet</span>
							</a>
						</p>
					</div>
				</div>
			</div>
		</nav>
	</div>
	
	<main>
		<section class="hero is-primary">
  <div class="hero-body">
    <div class="container">
      <div class="columns is-vcentered">
        <div class="column">
          <p class="title">
            Documentation
          </p>
          <p class="subtitle">
            Everything you need to <strong>create a game</strong> with Frag
          </p>
        </div>
        <div class="column">
          <div class="notification is-warning">
            <p>
              Documentation is still very much a work in progress. Please understand there may be rapid changes to this section of the website.
            </p>
          </div>
          Documentation Progress:
          <progress class="progress is-info" value="5" max="100">5%</progress>
        </div>
      </div>
    </div>
  </div>

  <div class="hero-foot">
    <div class="container">
      <nav class="tabs is-boxed">
        <ul>
          
          
          
            <a class="nav-item" href="/documentation/overview/">
              Overview
            </a>
          
          
          
            <li class="is-active">
              <a href="/documentation/gameloop/">
                Game Loop
              </a>
            </li>
          
          
        </ul>
      </nav></div>
    </div>
  
</section>
		<section class="section">
  <div class="columns">
    <div class="column is-3">
      <aside class="menu">
        <p class="menu-label">
          Introduction
        </p>
        <ul class="menu-list">
          <li><a class="is-active" href="#concept">The Concept</a></li>
          <li><a href="#implementation">The Implementation</a></li>
        </ul>
        <p class="menu-label">
          Initialization
        </p>
        <p class="menu-label">
          Update
        </p>
        <p class="menu-label">
          Render
        </p>
        <p class="menu-label">
          Shutdown
        </p>
      </aside>
    </div>
    <div class="column is-8">
      <div class="content doc-content" id="concept">
        <h3 class="title is-2">
        The Concept
        </h3>
        <h4 class="subtitle is-4">Initialize. Update. Render. Shutdown.</h4>
        <hr>
        <p>Almost every game is constructed around a game loop, which serves a number of purposes.</p>
        <p>Generally, a game loop is initiated and will run continuously until gameplay terminates. During each iteration of the game loop, a number of tasks are carried out. Tasks which are commonly executed during a single loop iteration include:</p>
        <ul>
          <li>Processing user input</li>
          <li>Updating game state</li>
          <li>Rendering the game</li>
        </ul>
        <p>Many games exhibit the pattern of implementing <strong>initialization</strong>, <strong>update</strong>, <strong>render</strong> and <strong>shutdown</strong> procedures, which can form the basis for a game loop.</p>
        <p>FRAG follows this implementation pattern, and exposes a game loop which the user can easily hook into.</p>
      </div>
      <div class="content doc-content" id="implementation" style="display: none;">
        <h3 class="title is-2">
        The Implementation
        </h3>
        <h4 class="subtitle is-4">How FRAG does it</h4>
        <hr>
        <p>FRAG's game loop is pretty standard and can be broken down into several sections.</p>
        <div class="notification is-success">
          <h4 class="title is-2">
          Initialization
          </h4>
          <h5 class="subtitle is-4">Let's get things started...</h5>
        </div>
        <p>The initialization phase of the game loop begins when the <strong>startFrag</strong> procedure is called.</p>
        <div class="columns is-8">
          <div class="column is-6">
            <a href="https://github.com/fragworks/frag/blob/master/src/frag.nim#L136"><div class="notification">Engine Code</div></a>
            <figure class="highlight"><pre><code class="nim">
proc startFrag*[T](app: T, config: Config) =
  var ctx = Frag()
  ctx.init(config, app)
  app.initApp(ctx)
            </code></pre></figure>
          </div>
          <div class="column is-6">
            <a href="https://github.com/fragworks/frag/blob/master/examples/desktop/00-hello-world/main.nim#L54"><div class="notification">Example Game Code</div></a>
            <figure class="highlight"><pre><code class="nim">
proc initApp(app: App, ctx: Frag) =
  # Application initialization logic goes here!
  discard

startFrag(App(), Config(
  rootWindowTitle: "Frag Example 00-hello-world",
  rootWindowPosX: window.posUndefined, rootWindowPosY: window.posUndefined,
  rootWindowWidth: 960, rootWindowHeight: 540,
  resetFlags: ResetFlag.VSync,
  logFileName: "example-00.log",
  assetRoot: "../assets",
  debugMode: BGFX_DEBUG_TEXT
))
            </code></pre></figure>
          </div>
        </div>
        <p>During this phase of the game loop, the framework itself along with all of its subsystems will be initialized. The <strong>initApp</strong> procedure of the app object provided to the <strong>startFrag</strong> procedure, will also be invoked - allowing the FRAG application to execute whatever initialization logic it needs to.</p>
        <div class="notification is-warning">
          <h4 class="title is-2">
          Update
          </h4>
          <h5 class="subtitle is-4">Your game logic goes here!</h5>
        </div>
        <p>Once the framework, subsystems, and application have all finished carrying out their initialization logic, the game loop actually begins.</p>
        <p>During every iteration of the game loop, the <a href="https://github.com/fragworks/frag/blob/master/src/frag.nim#L200"><strong>updateApp</strong></a> procedure will be called. This provides the application with a hook where it can implement whatever update logic it needs to.
        </p>
        <a href="https://github.com/fragworks/frag/blob/master/examples/desktop/00-hello-world/main.nim#L33"><div class="notification">Example Game Code</div></a>
        <figure class="highlight"><pre><code class="nim">
proc updateApp(app:App, ctx: Frag, deltaTime: float) =
  # Update application state here!
  discard
        </code></pre></figure>
        <div class="notification is-primary">
          <h4 class="title is-2">
          Render
          </h4>
          <h5 class="subtitle is-4">Ready. Set. Draw.</h5>
        </div>
        <p>Along with the updateApp procedure, the <a href="https://github.com/fragworks/frag/blob/master/src/frag.nim#L201"><strong>renderApp</strong></a> procedure will be called each frame. Similar to how application state updates should be performed during the updateApp invocation, any drawing that is to be done should be performed during this call.
        </p>
         <a href="https://github.com/fragworks/frag/blob/master/examples/desktop/00-hello-world/main.nim#L36"><div class="notification">Example Game Code</div></a>
        <figure class="highlight"><pre><code class="nim">
proc renderApp(app: App, ctx: Frag, deltaTime: float) =
  # Clear Color & Depth Buffers
  ctx.graphics.clearView(0, ClearMode.Color.ord or ClearMode.Depth.ord, 0x303030ff, 1.0, 0)
  # Perform application rendering here!
        </code></pre></figure>
        <div class="notification is-danger">
          <h4 class="title is-2">
          Shutdown
          </h4>
          <h5 class="subtitle is-4">Don't forget to clean up after yourself!</h5>
        </div>
        <p>The final phase of the game loop is the shutdown phase. This phase is entered when the framework calls the <a href="https://github.com/fragworks/frag/blob/master/src/frag.nim#L209"><strong>shutdownApp</strong></a> procedure.</p>

        <p>For this phase to be entered, the <a href="https://github.com/fragworks/frag/blob/master/src/frag.nim#L147"><strong>conditional check</strong></a> which was enforcing the actual loop of the game loop, must fail. This is generally caused by the end-user of the application closing it, or the application unexpectedly terminating.</p>

        <p>During the invoation of the shutdownApp procedure, resources which are not automatically released by the framework, or garbage-collected, should be freed.</p>
         <a href="https://github.com/fragworks/frag/blob/master/examples/desktop/00-hello-world/main.nim#L50"><div class="notification">Example Game Code</div></a>
        <figure class="highlight"><pre><code class="nim">
proc shutdownApp(app: App, ctx: Frag) =
  # Free resources here!
  discard
        </code></pre></figure>
      </div>
    </div>
  </div>
</section>

	</main>
	<footer class="footer">
		<div class="container">
			<div class="columns">
			<div class="column is-3">
				<div id="about" class="content">
				<strong xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">FRAG</strong> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://fragworks.io" property="cc:attributionName" rel="cc:attributionURL">Zachary Carter & Individual Contributors</a>.
				<div class="twitter-container">
					<iframe id="twitter-widget-0" scrolling="no" allowtransparency="true" class="twitter-follow-button twitter-follow-button-rendered" style="position: static; visibility: visible; width: 262px; height: 28px;" title="Twitter Follow Button" src="http://platform.twitter.com/widgets/follow_button.5c39137502ea1894df4434ae5ed041c5.en.html#dnt=false&amp;id=twitter-widget-0&amp;lang=en&amp;screen_name=hahaitsfunny&amp;show_count=true&amp;show_screen_name=true&amp;size=l&amp;time=1493497446003" data-screen-name="hahaitsfunny" frameborder="0"></iframe>
				</div>
				</div>
			</div>
			<div class="column is-5">
				<div id="share" class="content">
				<div>
					<strong>Support</strong> FRAG!
				</div>
				<div id="social">
					<iframe class="github-btn" src="https://ghbtns.com/github-btn.html?user=fragworks&amp;repo=frag&amp;type=star&amp;count=true&amp;size=large" allowtransparency="true" scrolling="0" frameborder="0" height="30px" width="160px"></iframe>

					<a href="https://twitter.com/share" class="twitter-share-button" data-size="large" data-text="FRAG: a game development framework built with @nim_lang" data-url="http://fragworks.io" data-via="hahaitsfunny" data-hashtags="FRAG" data-related="nim-lang" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
				</div>
				</div>
			</div>
			<div class="column is-4">
				<div id="sister">
				<p>
					Brought to you by these <strong>amazing</strong> technologies:
				</p>
				<ul>
					<li>
						<div class="columns">
							<div class="column">
								<a href="https://github.com/bkaradzic/bgfx">
									<strong>BGFX</strong>
								</a>
							</div>
							<div class="column">
								<iframe class="github-btn" src="https://ghbtns.com/github-btn.html?user=bkaradzic&amp;repo=bgfx&amp;type=star&amp;count=true&amp;size=large" allowtransparency="true" scrolling="0" frameborder="0" height="30px" width="160px"></iframe>
							</div>
						</div>
					</li>
				</ul>
				</div>
			</div>
			</div>

			<p id="tsp">
			<small>
				Source code licensed <a href="http://opensource.org/licenses/mit-license.php">MIT</a>.
				<br>
				Website content licensed <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.
			</small>
			</p>
		</div>
		</footer>
	<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>